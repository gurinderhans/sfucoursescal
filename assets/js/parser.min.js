$(document).ready(function(){function n(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return true;return false}function r(e){return!e||/^\s*$/.test(e)}function s(e,t){return!(t.indexOf(e)==-1)}function o(e){switch(e){case"M":return"2014-11-17";break;case"Tu":return"2014-11-18";break;case"W":return"2014-11-19";break;case"Th":return"2014-11-20";break;case"F":return"2014-11-21";break;default:return"2014-11-17"}}function u(e,t,n,r,i){var s=new Object;s.title=e;s.start=t;s.end=n;s.allDay=false;s.backgroundColor=r;if(i!="default"){s.borderColor=i}$("#calendar").fullCalendar("renderEvent",s)}function a(e){var t=[];if(s("Days",e)){t.push(o("M"));t.push(o("Tu"));t.push(o("W"));t.push(o("Th"));t.push(o("F"))}else if(s("Tu",e)||s("Th",e)){if(e.toLowerCase()=="TuTh".toLowerCase()){t.push(o(e.slice(0,2)));t.push(o(e.slice(2,4)))}else{t.push(o(e))}}else{var n=e.split("");for(k=0;k<n.length;k++){t.push(o(n[k]))}}return t}function f(e){var t=[];if(s("and",e)){var n=e.split("and");for(j=0;j<n.length;j++){var r=n[j].split(" ");r=r.filter(Boolean);t.push(r)}}else{t.push(e.split(" "))}return t}function l(t){var n=t.split("\n");var s=[];for(i=0;i<n.length;i++){if(!r(n[i]))s.push(n[i].trim())}var o=[];var u=[0];for(i=0;i<s.length;i++){if(e.indexOf(s[i])>-1){u.push(i)}}for(i=0;i<u.length-1;i++){o.push(s.slice(u[i],u[i+1]))}for(i=0;i<o.length;i++){var a=o[i];for(j=0;j<a.length;j++){if(e.indexOf(a[j])>-1){a.splice(j,1)}if(a[j].indexOf("Delete")>-1)a.splice(j,1)}}return o}function c(){$("#coursesInput").css("border","1px solid red").css("border-top","none").addClass("shakeAnimation");setTimeout(function(){$("#coursesInput").removeClass("shakeAnimation")},400)}function h(e){var t=l(e);if(t.length==0)c();else $("#coursesInput").css("border","1px solid #09CF2A").css("border-top","none");for(i=0;i<t.length;i++){var n=f(t[i][2]);for(j=0;j<n.length;j++){var r="#3a87ad";var o="default";if(s("Days",n[j][0])){n[j].splice(1,1);n[j][3]="2:00AM";r="#cd0000";o="#ffffff"}var h=a(n[j][0]);for(k=0;k<h.length;k++){var p=h[k];var d=n[j][1];var v=n[j][3];if(s("m",d.toLowerCase())){d=moment(d,"HH:mmA");v=moment(v,"HH:mmA")}else{d=moment(d,"HH:mm");v=moment(v,"HH:mm")}d=d.format("HH:mm:ss");v=v.format("HH:mm:ss");u(t[i][0],p+"T"+d,p+"T"+v,r,o)}}}}var e=["Open","Closed","Wait List"];if(window.innerWidth<580)week_display="ddd";else week_display="dddd";var t=window.innerHeight-90;$(window).resize(function(){t=window.innerHeight-90;$("#calendar").fullCalendar("option","height",t)});$("#calendar").fullCalendar({defaultView:"agendaWeek",allDaySlot:false,height:t,weekends:false,columnFormat:{week:week_display},scrollTime:"07:00:00",header:{left:"",center:"",right:""},defaultDate:"2014-11-17",editable:false});$("#coursesInput").on("paste",function(){$(this).css("font-size","12px");setTimeout(function(){$("#calendar").fullCalendar("removeEvents");var e=$("#coursesInput").val();h(e);$("#coursesInput").blur().val("").css("font-size","18px")},300)});$(window).keydown(function(e){if(e.which==73){$("#instructions").show()}}).keyup(function(e){if(e.which==73){$("#instructions").hide()}});$(window).keydown(function(e){if(e.which==72){$("#notesWrapper").show()}});$("#left.instr").click(function(){var e=window.open("assets/images/instructions.jpg","_blank");e.focus()});$("#right.instr").click(function(){html2canvas(document.getElementById("calendar"),{onrendered:function(e){var t=e.toDataURL("image/png");window.open(t)}})});if(n()){$("#left.instr span").text("Click");$("#right.instr span").text("Click")}$(window).keydown(function(e){if(e.which==74){}}).keyup(function(e){if(e.which==74){html2canvas(document.getElementById("calendar"),{onrendered:function(e){var t=e.toDataURL("image/png");window.open(t)}})}})})
