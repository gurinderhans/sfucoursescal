$(document).ready(function(){function n(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return true;return false}function r(e){return!e||/^\s*$/.test(e)}function s(e,t){return!(t.indexOf(e)==-1)}function u(e){switch(e){case"M":return"2014-11-17";break;case"Tu":return"2014-11-18";break;case"W":return"2014-11-19";break;case"Th":return"2014-11-20";break;case"F":return"2014-11-21";break;default:return"2014-11-17"}}function a(e,t,n){var r=new Object;r.title=e;r.start=t;r.end=n;r.allDay=false;$("#calendar").fullCalendar("renderEvent",r)}function f(e){var t=[];if(s("Days",e)){}else if(s("Tu",e)||s("Th",e)){t.push(u(e))}else{var n=e.split("");for(k=0;k<n.length;k++){t.push(u(n[k]))}}return t}function l(e){var t=[];if(s("and",e)){var n=e.split("and");for(j=0;j<n.length;j++){var r=n[j].split(" ");r=r.filter(Boolean);t.push(r)}}else{t.push(e.split(" "))}return t}function c(t){var n=t.split("\n");var s=[];for(i=0;i<n.length;i++){if(!r(n[i]))s.push(n[i].trim())}var o=[];var u=[0];for(i=0;i<s.length;i++){if(e.indexOf(s[i])>-1){u.push(i)}}for(i=0;i<u.length-1;i++){o.push(s.slice(u[i],u[i+1]))}for(i=0;i<o.length;i++){var a=o[i];for(j=0;j<a.length;j++){if(e.indexOf(a[j])>-1){a.splice(j,1)}if(a[j].indexOf("Delete")>-1)a.splice(j,1)}}return o}function h(e){var t=c(e);for(i=0;i<t.length;i++){var n=l(t[i][2]);for(j=0;j<n.length;j++){var r=f(n[j][0]);for(k=0;k<r.length;k++){var o=r[k];var u=n[j][1];var h=n[j][3];if(s("m",u.toLowerCase())){u=moment(u,"HH:mmA");h=moment(h,"HH:mmA")}else{u=moment(u,"HH:mm");h=moment(h,"HH:mm")}u=u.format("HH:mm:ss");h=h.format("HH:mm:ss");a(t[i][0],o+"T"+u,o+"T"+h)}}}}var e=["Open","Closed","Wait List"];if(window.innerWidth<580)week_display="ddd";else week_display="dddd";var t=window.innerHeight-85;$("#calendar").fullCalendar({defaultView:"agendaWeek",allDaySlot:false,height:t,weekends:false,columnFormat:{week:week_display},minTime:"07:00:00",header:{left:"",center:"",right:""},defaultDate:"2014-11-17",editable:false,eventLimit:true});var o=function(e,t){var n=[];while(e.length){n.push(e.splice(0,t))}return n};$("#coursesInput").on("paste",function(){$(this).css("font-size","12px");setTimeout(function(){var e=$("#coursesInput").val();$("#calendar").fullCalendar("removeEvents");h(e);$("#coursesInput").blur()},300)});$(window).keydown(function(e){if(e.which==73){$("#instructions").show()}}).keyup(function(e){if(e.which==73){$("#instructions").hide()}});$(window).keydown(function(e){if(e.which==72){$("#notesWrapper").show()}});$("#left.instr").click(function(){var e=window.open("instructions.jpg","_blank");e.focus()});$("#right.instr").click(function(){html2canvas(document.getElementById("calendar"),{onrendered:function(e){var t=e.toDataURL("image/png");window.open(t)}})});if(n()){$("#left.instr span").text("Click");$("#right.instr span").text("Click")}$(window).keydown(function(e){if(e.which==74){}}).keyup(function(e){if(e.which==74){html2canvas(document.getElementById("calendar"),{onrendered:function(e){var t=e.toDataURL("image/png");window.open(t)}})}})})
