$(document).ready(function(){function t(e){return!e||/^\s*$/.test(e)}function n(e,t){return!(t.indexOf(e)==-1)}function s(e){switch(e){case"M":return"2014-11-17";break;case"Tu":return"2014-11-18";break;case"W":return"2014-11-19";break;case"Th":return"2014-11-20";break;case"F":return"2014-11-21";break;default:return"2014-11-17"}}function o(e,t,n){var r=new Object;r.title=e;r.start=t;r.end=n;r.allDay=false;$("#calendar").fullCalendar("renderEvent",r)}function u(e){var t=[];if(n("Days",e)){}else if(n("Tu",e)||n("Th",e)){t.push(s(e))}else{var r=e.split("");for(k=0;k<r.length;k++){t.push(s(r[k]))}}return t}function a(e){var t=[];if(n("and",e)){var r=e.split("and");for(j=0;j<r.length;j++){var i=r[j].split(" ");i=i.filter(Boolean);t.push(i)}}else{t.push(e.split(" "))}return t}function f(n){var r=n.split("\n");var s=[];for(i=0;i<r.length;i++){if(!t(r[i]))s.push(r[i].trim())}var o=[];var u=[0];for(i=0;i<s.length;i++){if(e.indexOf(s[i])>-1){u.push(i)}}for(i=0;i<u.length-1;i++){o.push(s.slice(u[i],u[i+1]))}for(i=0;i<o.length;i++){var a=o[i];for(j=0;j<a.length;j++){if(e.indexOf(a[j])>-1){a.splice(j,1)}if(a[j].indexOf("Delete")>-1)a.splice(j,1)}}return o}function l(e){var t=f(e);for(i=0;i<t.length;i++){var r=a(t[i][2]);for(j=0;j<r.length;j++){var s=u(r[j][0]);for(k=0;k<s.length;k++){var l=s[k];var c=r[j][1];var h=r[j][3];if(n("m",c.toLowerCase())){c=moment(c,"HH:mmA");h=moment(h,"HH:mmA")}else{c=moment(c,"HH:mm");h=moment(h,"HH:mm")}c=c.format("HH:mm:ss");h=h.format("HH:mm:ss");o(t[i][0],l+"T"+c,l+"T"+h)}}}}var e=["Open","Closed","Wait List"];$("#calendar").fullCalendar({defaultView:"agendaWeek",allDaySlot:false,height:680,weekends:false,columnFormat:{week:"dddd"},minTime:"07:00:00",header:{left:"",center:"",right:""},defaultDate:"2014-11-17",editable:false,eventLimit:true});var r=function(e,t){var n=[];while(e.length){n.push(e.splice(0,t))}return n};$("#coursesInput").on("paste",function(){$(this).css("font-size","12px");setTimeout(function(){var e=$("#coursesInput").val();$("#calendar").fullCalendar("removeEvents");l(e)},300)});$(window).keydown(function(e){if(e.which==73){$("#instructions").show()}}).keyup(function(e){if(e.which==73){$("#instructions").hide()}});$(window).keydown(function(e){if(e.which==78){$("#notesWrapper").show()}}).keyup(function(e){if(e.which==78){$("#notesWrapper").hide()}});$(window).keydown(function(e){if(e.which==74){}}).keyup(function(e){if(e.which==74){html2canvas(document.getElementById("calendar"),{onrendered:function(e){var t=e.toDataURL("image/png");window.open(t)}})}})})
